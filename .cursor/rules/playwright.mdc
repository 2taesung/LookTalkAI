---
description:
globs:
alwaysApply: false
---
# Playwright í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

## ğŸ¯ í•µì‹¬ ì›ì¹™

### data-testid ìš°ì„ í™” ì›ì¹™
**Playwright í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™**: ìš”ì†Œë¥¼ ì„ íƒí•  ë•Œ ìš°ì„ ì ìœ¼ë¡œ `data-testid`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

1. **í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ**: ìš”ì†Œ ì„ íƒ ì‹œ `data-testid`ê°€ ìˆë‹¤ë©´ ê°€ì¥ ìš°ì„ ì ìœ¼ë¡œ ì‚¬ìš©
2. **data-testidê°€ ì—†ëŠ” ê²½ìš°**: ë‹¤ë¥¸ ì…€ë ‰í„° ì „ëµì„ ìˆœì„œëŒ€ë¡œ ì‹œë„
3. **data-testid ì¶”ê°€ê°€ í•„ìš”í•œ ê²½ìš°**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì—ê²Œ ì¶”ê°€ ìš”ì²­

### data-testid ì¶”ê°€ ìš”ì²­ í”„ë¡œì„¸ìŠ¤
```typescript
// í…ŒìŠ¤íŠ¸ ì‘ì„± ì¤‘ data-testidê°€ ì—†ì–´ì„œ ì¶”ê°€ ìš”ì²­ì´ í•„ìš”í•œ ê²½ìš°
// ìš”ì²­ ì˜ˆì‹œ
// ì»´í¬ë„ŒíŠ¸: CustomerChatList
// ìœ„ì¹˜: apps/services/afterdoc-saas-web/src/pages/customer-chat/
// í•„ìš”í•œ data-testid: 
// - customer-chat-list-container
// - customer-chat-item
// - customer-chat-search-input
```

## í…ŒìŠ¤íŠ¸ êµ¬ì¡°

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëª…ëª…
- ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” `TC-XXX: í•œê¸€ ì„¤ëª…` í˜•ì‹ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.
- ì˜ˆ: `test('TC-001: ê´€ë¦¬ì ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', async ({ page }) => {})`

### í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”
- ê´€ë ¨ëœ í…ŒìŠ¤íŠ¸ëŠ” `test.describe` ë¸”ë¡ìœ¼ë¡œ ê·¸ë£¹í™”í•©ë‹ˆë‹¤.
- ë³‘ë ¬ ì‹¤í–‰ì´ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ëŠ” `test.describe.parallel`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°í™”
- ê° í…ŒìŠ¤íŠ¸ëŠ” Setup, Action, Assertion ë‹¨ê³„ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.
- ê° ë‹¨ê³„ëŠ” ì£¼ì„ìœ¼ë¡œ ëª…í™•íˆ í‘œì‹œí•©ë‹ˆë‹¤.

```typescript
test('TC-001: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  // 1. Setup (ê¸°ë³¸ URLë¡œ ì´ë™í•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ í‘œì‹œë¨)
  await page.goto('/');
  
  // 2. Action
  await page.fill('#username', 'testuser');
  await page.fill('#password', 'password');
  await page.click('button[type="submit"]');
  
  // 3. Assertion
  await expect(page.locator('.welcome-message')).toBeVisible();
});
```

## ì…€ë ‰í„° ìš°ì„ ìˆœìœ„

### 1. data-testid (ê°€ì¥ ê¶Œì¥)
```typescript
// âœ… ê°€ì¥ ì•ˆì •ì ì´ê³  ëª…í™•í•œ ë°©ë²• - ë°˜ë“œì‹œ getByTestId ì‚¬ìš©
await page.getByTestId('login-submit-button').click();
await page.getByTestId('customer-chat-title').waitFor({ state: 'visible' });

// âŒ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ - locatorì™€ data-testid ì†ì„± ì„ íƒì
await page.locator('[data-testid="login-submit-button"]').click(); // ì˜ëª»ëœ íŒ¨í„´!
await page.locator('[data-testid="customer-chat-title"]').waitFor(); // ì˜ëª»ëœ íŒ¨í„´!
```

### 2. Role + Name
```typescript
// âœ… ì ‘ê·¼ì„±ê³¼ ì˜ë¯¸ê°€ ëª…í™•í•œ ë°©ë²•
await page.getByRole('button', { name: 'ë¡œê·¸ì¸' }).click();
await page.getByRole('textbox', { name: 'ì´ë©”ì¼' }).fill('test@example.com');
```

### 3. Label + Name
```typescript
// âœ… í¼ ìš”ì†Œì— ì í•©í•œ ë°©ë²•
await page.getByLabel('ì´ë©”ì¼').fill('test@example.com');
await page.getByLabel('ë¹„ë°€ë²ˆí˜¸').fill('password123');
```

### 4. Placeholder
```typescript
// âœ… ì…ë ¥ í•„ë“œì— ì í•©í•œ ë°©ë²•
await page.getByPlaceholder('ì•„ì´ë”” ì…ë ¥').fill('testuser');
await page.getByPlaceholder('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥').fill('password');
```

### 5. Text Content
```typescript
// âœ… í…ìŠ¤íŠ¸ ê¸°ë°˜ ìš”ì†Œì— ì í•©í•œ ë°©ë²•
await page.getByText('íšŒì›ê°€ì…').click();
await page.getByText('ê³ ê°ì±„íŒ…').waitFor({ state: 'visible' });
```

## âš ï¸ ì¤‘ìš”: í´ë˜ìŠ¤ ì„ íƒì ì‚¬ìš© ê¸ˆì§€

### ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  íŒ¨í„´ë“¤
```typescript
// âŒ í´ë˜ìŠ¤ ì„ íƒì - ì ˆëŒ€ ê¸ˆì§€
await page.locator('[class*="EventListCard"]').click();
await page.locator('.submit-button').click();
await page.locator('[class^="customer-"]').click();

// âŒ data-testidë¥¼ locatorë¡œ ì„ íƒ - ì ˆëŒ€ ê¸ˆì§€
await page.locator('[data-testid="event-list-card"]').click();

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• - ë°˜ë“œì‹œ ì´ë ‡ê²Œ ì‚¬ìš©
await page.getByTestId('event-list-card').click();
```

## data-testid ì‚¬ìš© ê·œì¹™

### data-testidì˜ ëª©ì ê³¼ ì›ì¹™
1. **ìˆœìˆ˜ í…ŒìŠ¤íŠ¸ ëª©ì **
   - data-testidëŠ” ì˜¤ì§ E2E í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ìš©ë„ë¡œë§Œ ì‚¬ìš©
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ UI/UXì— ì ˆëŒ€ ì˜í–¥ì„ ì£¼ì§€ ì•Šì•„ì•¼ í•¨
   - í…ŒìŠ¤íŠ¸ ì™¸ë¶€ì—ì„œëŠ” ì˜ë¯¸ ì—†ëŠ” ì†ì„±ì´ì–´ì•¼ í•¨

2. **data-testid ì¶”ê°€ ìš”ì²­**
   - í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì—ê²Œ data-testid ì¶”ê°€ ìš”ì²­ ì‹œ:
     - í…ŒìŠ¤íŠ¸ ëª©ì ì„ì„ ëª…í™•íˆ ì „ë‹¬
     - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥ ì—†ìŒì„ ê°•ì¡°
     - ì»´í¬ë„ŒíŠ¸/í˜ì´ì§€ ìœ„ì¹˜ì™€ ì œì•ˆí•˜ëŠ” data-testid ê°’ ì œê³µ

3. **data-testid ëª…ëª… ê·œì¹™**
   - ì»´í¬ë„ŒíŠ¸/ê¸°ëŠ¥-ìš”ì†Œ-ìš©ë„ í˜•ì‹ìœ¼ë¡œ ì‘ì„±
   - ì˜ˆ: `login-submit-button`, `chat-message-input`, `patient-title`

4. **ì„ì‹œ ëŒ€ì‘**
   - data-testidê°€ ì¶”ê°€ë˜ê¸° ì „ê¹Œì§€ëŠ” ê¸°ì¡´ ì…€ë ‰í„° ì‚¬ìš©
   - data-testid ì¶”ê°€ í›„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—…ë°ì´íŠ¸

### data-testid ì‚¬ìš© ì˜ˆì‹œ
```typescript
// âŒ ì˜ëª»ëœ ë°©ì‹: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥
await page.evaluate(() => {
  // DOMì„ ì§ì ‘ ìˆ˜ì •í•˜ê±°ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥ì„ ì£¼ëŠ” ì½”ë“œ
  document.querySelector('.login-button').setAttribute('data-testid', 'login-button');
  document.querySelector('.login-button').addEventListener('click', () => {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜ì •
  });
});

// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹: ìˆœìˆ˜ í…ŒìŠ¤íŠ¸ ëª©ì 
await page.getByTestId('login-button').click();

// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹: data-testidê°€ ì—†ì„ ê²½ìš° ê¸°ì¡´ ì…€ë ‰í„° ì‚¬ìš©
await page.getByRole('button', { name: 'ë¡œê·¸ì¸' }).click();
```

## ëŒ€ê¸° ì „ëµ

### ê¶Œì¥ë˜ëŠ” ë°©ì‹
```typescript
// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°
await page.waitForLoadState('networkidle');

// ìš”ì†Œ ê°€ì‹œì„± ëŒ€ê¸°
await expect(page.locator('.loading-spinner')).toBeHidden();
await expect(page.locator('.success-message')).toBeVisible();

// API ì‘ë‹µ ëŒ€ê¸°
const responsePromise = page.waitForResponse(response => 
  response.url().includes('/api/data') && response.status() === 200
);

// ìš”ì†Œ ì¡´ì¬ ëŒ€ê¸° (data-testid ìš°ì„ )
await page.waitForSelector('[data-testid="chatting-list-container"]', { timeout: 5000 });
```

### í”¼í•´ì•¼ í•  ë°©ì‹
```typescript
// âŒ í•˜ë“œì½”ë”©ëœ ëŒ€ê¸° ì‹œê°„ ì‚¬ìš©
await page.waitForTimeout(5000);

// âŒ ë¶ˆì•ˆì •í•œ CSS í´ë˜ìŠ¤ ì˜ì¡´
await page.waitForSelector('.flex.h-full.flex-col.pb-10');
```

### ì‹¤ì œ í”„ë¡œì íŠ¸ ëŒ€ê¸° íŒ¨í„´
```typescript
// í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´
// 1. ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸°
await page.waitForLoadState('networkidle');

// 2. data-testid ìš°ì„  ëŒ€ê¸°
try {
  await page.waitForSelector('[data-testid="chatting-list-container"]', { timeout: 5000 });
} catch (error) {
  // ëŒ€ì•ˆ ì…€ë ‰í„° ì‚¬ìš©
  await page.waitForSelector('.flex.h-full.flex-col.pb-10', { timeout: 5000 });
}

// 3. ìš”ì†Œ ìƒíƒœ ëŒ€ê¸°
await page.locator('[data-testid="customer-chat-title"]').waitFor({ state: 'visible', timeout: 5000 });
```

## í…ŒìŠ¤íŠ¸ ê²©ë¦¬

### í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
```typescript
// fixtures.ts
import { test as base } from '@playwright/test';
import { TEST_ACCOUNT } from './test-config';

export const test = base.extend({
  loggedInPage: async ({ page }, use) => {
    await page.goto('http://localhost:3000/');
    
    // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
    const isLoggedIn = await page
      .locator('[data-testid="customer-chat-title"]')
      .isVisible()
      .catch(() => false);

    if (!isLoggedIn) {
      await page.getByPlaceholder('ì•„ì´ë”” ì…ë ¥').fill(TEST_ACCOUNT.id);
      await page.getByPlaceholder('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥').fill(TEST_ACCOUNT.pw);
      await page.getByRole('button', { name: 'ë¡œê·¸ì¸' }).click();
      await page.waitForLoadState('networkidle');
    }
    
    await use(page);
  },
});
```

### í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬
```typescript
// test-config.ts (ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°)
export const TEST_ACCOUNT = {
  id: 'E2E_test_afterdoc_ID',
  pw: 'E2E_test_afterdoc_PW',
  test_name: 'ì´íƒœì„±',
};

// test-data.ts
export const TEST_CHAT_MESSAGES = {
  simple: 'í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€',
  long: 'ì´ê²ƒì€ ë§¤ìš° ê¸´ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì¤„ì— ê±¸ì³ ì‘ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  special: 'íŠ¹ìˆ˜ë¬¸ì í…ŒìŠ¤íŠ¸: !@#$%^&*()',
};
```

## ì—ëŸ¬ ì²˜ë¦¬

### ìŠ¤í¬ë¦°ìƒ·ê³¼ ë¹„ë””ì˜¤
```typescript
test('TC-001: ì‹¤íŒ¨ ì‹œ ìŠ¤í¬ë¦°ìƒ· ì €ì¥', async ({ page }) => {
  try {
    await page.goto('/error-page');
    await expect(page.locator('[data-testid="error-message"]')).toBeVisible();
  } catch (error) {
    await page.screenshot({ path: 'error-screenshot.png' });
    throw error;
  }
});
```

### ë””ë²„ê¹… ê°€ì´ë“œ ë° ë¡œê¹… í‘œì¤€í™”

#### ë¡œê¹… í‘œì¤€í™” ê·œì¹™
**ì¤‘ìš”**: í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” ì¼ê´€ëœ ë¡œê¹…ì„ ìœ„í•´ ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

1. **ì •ë³´ì„± ë¡œê·¸**: `console.info()` ì‚¬ìš©
   - í…ŒìŠ¤íŠ¸ ì§„í–‰ ìƒí™© í‘œì‹œ
   - ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
   - ë‹¨ê³„ë³„ ì§„í–‰ ìƒí™© ë¡œê·¸

2. **ì˜¤ë¥˜ ë¡œê·¸**: `console.error()` ì‚¬ìš©
   - í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ
   - ì˜ˆì™¸ ì²˜ë¦¬ ì‹œ

3. **ê²½ê³  ë¡œê·¸**: `console.warn()` ì‚¬ìš©
   - ì¬ì‹œë„ ìƒí™©
   - ê²½ê³  ë©”ì‹œì§€

4. **console.log ì‚¬ìš© ê¸ˆì§€**: ì¼ê´€ì„±ì„ ìœ„í•´ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   - ê¸°ì¡´ ì½”ë“œì—ì„œ `console.log`ë¥¼ ë°œê²¬í•˜ë©´ ì¦‰ì‹œ `console.info`ë¡œ ë³€ê²½
   - ëª¨ë“  í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ `console.log` ì‚¬ìš© ê¸ˆì§€

#### ë¡œê¹… ì˜ˆì‹œ
```typescript
// âœ… ì˜¬ë°”ë¥¸ ë¡œê¹… ë°©ì‹
test('TC-001: ë””ë²„ê¹… ì˜ˆì‹œ', async ({ page }) => {
  console.info('Step 1: Navigating to login page');
  await page.goto('http://localhost:3000/');
  
  console.info('Step 2: Checking login status');
  const isLoggedIn = await page
    .locator('[data-testid="customer-chat-title"]')
    .isVisible()
    .catch(() => false);
  console.info('Is logged in:', isLoggedIn);
  
  try {
    // í…ŒìŠ¤íŠ¸ ë¡œì§
    console.info('âœ“ í…ŒìŠ¤íŠ¸ ì„±ê³µ');
  } catch (error) {
    console.error('âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
  }
});

// âŒ ì˜ëª»ëœ ë¡œê¹… ë°©ì‹
test('TC-002: ì˜ëª»ëœ ë¡œê¹… ì˜ˆì‹œ', async ({ page }) => {
  console.log('ì´ë ‡ê²Œ í•˜ì§€ ë§ˆì„¸ìš”'); // console.log ì‚¬ìš© ê¸ˆì§€
  
  // ì˜¬ë°”ë¥¸ ë°©ì‹
  console.info('ì´ë ‡ê²Œ í•˜ì„¸ìš”');
});
```

#### í…ŒìŠ¤íŠ¸ ë‹¨ê³„ë³„ ë¡œê¹… íŒ¨í„´
```typescript
test('TC-001: í‘œì¤€ ë¡œê¹… íŒ¨í„´', async ({ page }) => {
  console.info('=== í…ŒìŠ¤íŠ¸ ì‹œì‘: ë¡œê·¸ì¸ ë° ì±„íŒ… ===');
  
  // Setup ë‹¨ê³„
  console.info('Step 1: ë¡œê·¸ì¸ í˜ì´ì§€ ì§„ì…');
  await page.goto('/'); // ê¸°ë³¸ URLë¡œ ì´ë™í•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ í‘œì‹œë¨
  
  // Action ë‹¨ê³„
  console.info('Step 2: ë¡œê·¸ì¸ ì‹œë„');
  try {
    await page.getByPlaceholder('ì•„ì´ë”” ì…ë ¥').fill('test');
    await page.getByPlaceholder('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥').fill('password');
    await page.getByRole('button', { name: 'ë¡œê·¸ì¸' }).click();
    console.info('âœ“ ë¡œê·¸ì¸ ì„±ê³µ');
  } catch (error) {
    console.error('âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨:', error);
    throw error;
  }
  
  // Assertion ë‹¨ê³„
  console.info('Step 3: ë¡œê·¸ì¸ ê²°ê³¼ í™•ì¸');
  await expect(page.locator('[data-testid="welcome-message"]')).toBeVisible();
  
  console.info('=== í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
});
```

#### ì¬ì‹œë„ ë¡œì§ì—ì„œì˜ ë¡œê¹…
```typescript
async function attemptTest(retryCount = 0): Promise<void> {
  const maxRetries = 1;
  
  try {
    console.info(`í…ŒìŠ¤íŠ¸ ì‹œë„ ${retryCount + 1}/${maxRetries + 1}`);
    
    // í…ŒìŠ¤íŠ¸ ë¡œì§
    console.info('âœ“ í…ŒìŠ¤íŠ¸ ì„±ê³µ');
    
  } catch (error) {
    if (retryCount < maxRetries) {
      console.warn(`í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¡œ ì¸í•œ ì¬ì‹œë„ ${retryCount + 1}/${maxRetries}`);
      return attemptTest(retryCount + 1);
    }
    console.error('âŒ ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ ì´ˆê³¼:', error);
    throw error;
  }
}
```

## í™˜ê²½ ë³€ìˆ˜

### í™˜ê²½ë³„ ì„¤ì •
```typescript
// playwright.config.ts (ì‹¤ì œ í”„ë¡œì íŠ¸ ì„¤ì •)
export default defineConfig({
  use: {
    baseURL: process.env.BASE_URL || 'http://localhost:3000',
  },
  webServer: {
    command: 'pnpm afterdoc-saas-web:dev',
    url: 'http://localhost:3000/',
    reuseExistingServer: true,
    timeout: 120 * 1000,
  },
});
```

### ì‹œí¬ë¦¿ ê´€ë¦¬
```typescript
// .env
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=secret123

// test.spec.ts
test('TC-001: í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©', async ({ page }) => {
  await page.fill('[data-testid="email-input"]', process.env.TEST_USER_EMAIL);
  await page.fill('[data-testid="password-input"]', process.env.TEST_USER_PASSWORD);
});
```

## Page Object Model

### í˜ì´ì§€ ê°ì²´ ì •ì˜
```typescript
// pages/LoginPage.ts
export class LoginPage {
  constructor(private page: Page) {}

  async goto() {
    await this.page.goto('/'); // ê¸°ë³¸ URLë¡œ ì´ë™í•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ í‘œì‹œë¨
  }

  async login(username: string, password: string) {
    await this.page.getByPlaceholder('ì•„ì´ë”” ì…ë ¥').fill(username);
    await this.page.getByPlaceholder('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥').fill(password);
    await this.page.getByRole('button', { name: 'ë¡œê·¸ì¸' }).click();
  }

  async expectSuccessMessage() {
    await expect(this.page.locator('[data-testid="welcome-message"]')).toBeVisible();
  }
}

// pages/CustomerChatPage.ts
export class CustomerChatPage {
  constructor(private page: Page) {}

  async goto() {
    await this.page.goto('/customer-chat');
    await this.page.waitForLoadState('networkidle');
  }

  async waitForChatList() {
    await this.page.waitForSelector('[data-testid="chatting-list-container"]', { timeout: 5000 });
  }

  async clickChatRoom(roomName: string) {
    await this.page.locator('.text-Header14.text-black700', { hasText: roomName }).click();
  }

  async sendMessage(message: string) {
    await this.page.getByTestId('chatting-textarea').fill(message);
    await this.page.getByRole('button', { name: 'ì „ì†¡' }).click();
  }
}
```

### í˜ì´ì§€ ê°ì²´ ì‚¬ìš©
```typescript
test('TC-001: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  const loginPage = new LoginPage(page);
  await loginPage.goto();
  await loginPage.login(TEST_ACCOUNT.id, TEST_ACCOUNT.pw);
  await loginPage.expectSuccessMessage();
});
```

## CI/CD í†µí•©

### GitHub Actions ì„¤ì •
```yaml
# .github/workflows/e2e-tests.yml
name: E2E Tests
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install -g pnpm
      - run: pnpm install
      - run: pnpm playwright install
      - run: pnpm playwright test
      - uses: actions/upload-artifact@v3
        if: failure()
        with:
          name: playwright-report
          path: playwright-report/
```

## ì„±ëŠ¥ ìµœì í™”

### ë³‘ë ¬ ì‹¤í–‰ ìµœì í™”
```typescript
// playwright.config.ts
export default defineConfig({
  fullyParallel: true,
  workers: process.env.CI ? 1 : undefined,
  retries: process.env.CI ? 2 : 0,
});
```

### í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ìµœì í™”
```typescript
// ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •
test.describe.parallel('Customer Chat Tests', () => {
  test('TC-001: ì±„íŒ… ëª©ë¡ ë¡œë“œ', async ({ page }) => {
    // ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸
  });
  
  test('TC-002: ë©”ì‹œì§€ ì „ì†¡', async ({ page }) => {
    // ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸
  });
});
```

## ëª¨ë‹ˆí„°ë§ ë° ë¦¬í¬íŒ…

### í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„
```typescript
// playwright.config.ts
export default defineConfig({
  reporter: [
    ['html'],
    ['json', { outputFile: 'test-results/results.json' }],
    ['junit', { outputFile: 'test-results/results.xml' }]
  ],
  outputDir: 'test-results',
  preserveOutput: 'failures-only',
});
```

## Biome Lint ê·œì¹™ ì¤€ìˆ˜ (í•„ìˆ˜)

**E2E í…ŒìŠ¤íŠ¸ ì½”ë“œë„ í”„ë¡œë•ì…˜ ì½”ë“œì™€ ë™ì¼í•œ Biome lint ê·œì¹™ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.**

### 1. forEach ëŒ€ì‹  for...of ì‚¬ìš© (í•„ìˆ˜)

BiomeëŠ” `forEach` ì‚¬ìš©ì„ ê¸ˆì§€í•˜ê³  `for...of` ë£¨í”„ ì‚¬ìš©ì„ ê°•ì œí•©ë‹ˆë‹¤.

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - forEach ì‚¬ìš©
const testUrls = ['/page1', '/page2', '/page3'];
testUrls.forEach(async (url) => {
  await page.goto(url);
  await expect(page).toHaveTitle(/Test/);
});

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - for...of ì‚¬ìš©
const testUrls = ['/page1', '/page2', '/page3'];
for (const url of testUrls) {
  await page.goto(url);
  await expect(page).toHaveTitle(/Test/);
}
```

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë°˜ë³µì—ì„œ forEach ì‚¬ìš©
const testCases = [
  { name: 'í™˜ì1', expected: true },
  { name: 'í™˜ì2', expected: false },
];

testCases.forEach(({ name, expected }) => {
  test(`TC-001: ${name} í…ŒìŠ¤íŠ¸`, async ({ page }) => {
    const result = await checkPatient(page, name);
    expect(result).toBe(expected);
  });
});

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - for...of ì‚¬ìš©
for (const { name, expected } of testCases) {
  test(`TC-001: ${name} í…ŒìŠ¤íŠ¸`, async ({ page }) => {
    const result = await checkPatient(page, name);
    expect(result).toBe(expected);
  });
}
```

### 2. any íƒ€ì… ì‚¬ìš© ê¸ˆì§€ (í•„ìˆ˜)

í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œë„ `any` íƒ€ì… ì‚¬ìš©ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ëª¨ë“  íƒ€ì…ì€ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - any íƒ€ì… ì‚¬ìš©
const testData: any = {
  username: 'test',
  password: 'test123',
};

const mockResponse: any = await page.evaluate(() => {
  return { success: true };
});

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - ëª…ì‹œì  íƒ€ì… ì •ì˜
interface TestLoginData {
  username: string;
  password: string;
}

const testData: TestLoginData = {
  username: 'test',
  password: 'test123',
};

interface LoginResponse {
  success: boolean;
}

const mockResponse = await page.evaluate(() => {
  return { success: true } as LoginResponse;
});
```

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - Page Object ë©”ì„œë“œ ë°˜í™˜ íƒ€ì… any
async getElements(): Promise<any> {
  return await this.page.locator('.item').all();
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - ëª…ì‹œì  ë°˜í™˜ íƒ€ì…
async getElements(): Promise<Locator[]> {
  return await this.page.locator('.item').all();
}
```

**ë¶ˆê°€í”¼í•œ ê²½ìš° biome-ignore ì‚¬ìš©:**
```typescript
// ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íƒ€ì…ì´ ë¶ˆì™„ì „í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©
// biome-ignore lint/suspicious/noExplicitAny: Playwrightì˜ ë‚´ë¶€ API íƒ€ì… ë¶ˆì™„ì „
const context: any = await browser.newContext();
```

### 3. const ì‚¬ìš© (ì¬í• ë‹¹ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜)

ì¬í• ë‹¹ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ `const`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - ì¬í• ë‹¹ë˜ì§€ ì•ŠëŠ”ë° let ì‚¬ìš©
test('TC-001: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  let loginButton = page.getByRole('button', { name: 'ë¡œê·¸ì¸' });
  let currentUrl = page.url();

  await loginButton.click();
  expect(currentUrl).toContain('/login');
});

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - const ì‚¬ìš©
test('TC-001: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  const loginButton = page.getByRole('button', { name: 'ë¡œê·¸ì¸' });
  const currentUrl = page.url();

  await loginButton.click();
  expect(currentUrl).toContain('/login');
});
```

### 4. í›„í–‰ ì‰¼í‘œ ì‚¬ìš©

ë°°ì—´, ê°ì²´, í•¨ìˆ˜ ì¸ìì˜ ë§ˆì§€ë§‰ í•­ëª©ì— í›„í–‰ ì‰¼í‘œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - í›„í–‰ ì‰¼í‘œ ì—†ìŒ
const testData = {
  username: 'test',
  password: 'test123'
};

const testCases = [
  { name: 'í…ŒìŠ¤íŠ¸1', expected: true },
  { name: 'í…ŒìŠ¤íŠ¸2', expected: false }
];

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - í›„í–‰ ì‰¼í‘œ ì‚¬ìš©
const testData = {
  username: 'test',
  password: 'test123',
};

const testCases = [
  { name: 'í…ŒìŠ¤íŠ¸1', expected: true },
  { name: 'í…ŒìŠ¤íŠ¸2', expected: false },
];
```

### 5. íŒŒì¼ ë ê°œí–‰ í•„ìˆ˜

ëª¨ë“  íŒŒì¼ì€ ëì— ë¹ˆ ì¤„ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ - íŒŒì¼ ë ê°œí–‰ ì—†ìŒ
test('TC-001: ë§ˆì§€ë§‰ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  await page.goto('/');
  await expect(page).toHaveTitle(/Test/);
});
// íŒŒì¼ ë (ê°œí–‰ ì—†ìŒ)

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - íŒŒì¼ ë ê°œí–‰ ìˆìŒ
test('TC-001: ë§ˆì§€ë§‰ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  await page.goto('/');
  await expect(page).toHaveTitle(/Test/);
});
// íŒŒì¼ ë (ê°œí–‰ ìˆìŒ)

```

### 6. Lint ê²€ì‚¬ ì‹¤í–‰

```bash
# E2E í…ŒìŠ¤íŠ¸ íŒŒì¼ Biome ì²´í¬
pnpm biome check e2e/                  # e2e í´ë” ì „ì²´ ì²´í¬
pnpm biome check --apply e2e/          # ìë™ ìˆ˜ì • ì ìš©
pnpm biome check e2e/login.spec.ts     # íŠ¹ì • íŒŒì¼ ì²´í¬

# Git push ì „ ìë™ ì‹¤í–‰
# .husky/pre-push í›…ì—ì„œ ìë™ìœ¼ë¡œ Biome ì²´í¬ ì‹¤í–‰ë¨
```

### 7. í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ ì£¼ì˜ì‚¬í•­

**E2E í…ŒìŠ¤íŠ¸ íŠ¹í™” Lint ê·œì¹™:**

```typescript
// âœ… ì˜¬ë°”ë¥¸ E2E í…ŒìŠ¤íŠ¸ íŒ¨í„´
test('TC-001: ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸', async ({ page }) => {
  // 1. ëª…ì‹œì  íƒ€ì… ì •ì˜
  interface LoginCredentials {
    username: string;
    password: string;
  }

  const credentials: LoginCredentials = {
    username: 'test',
    password: 'test123',
  };

  // 2. const ì‚¬ìš©
  const loginPage = page.getByTestId('login-page');
  const submitButton = page.getByRole('button', { name: 'ë¡œê·¸ì¸' });

  // 3. for...of ì‚¬ìš© (forEach ê¸ˆì§€)
  const inputFields = [
    { testId: 'username-input', value: credentials.username },
    { testId: 'password-input', value: credentials.password },
  ];

  for (const field of inputFields) {
    await page.getByTestId(field.testId).fill(field.value);
  }

  // 4. í›„í–‰ ì‰¼í‘œ
  await submitButton.click();

  // 5. ëª…ì‹œì  íƒ€ì… ë°˜í™˜
  const currentUrl: string = page.url();
  expect(currentUrl).toContain('/dashboard');
});
// 6. íŒŒì¼ ë ê°œí–‰
```

## ê¶Œì¥ ì‚¬í•­ ìš”ì•½

1. **data-testid ìš°ì„ í™”**: ëª¨ë“  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ìš”ì†Œì— data-testid ì¶”ê°€
2. **ì•ˆì •ì ì¸ ì…€ë ‰í„°**: CSS í´ë˜ìŠ¤ë³´ë‹¤ ì˜ë¯¸ìˆëŠ” ì…€ë ‰í„° ì‚¬ìš©
3. **ì ì ˆí•œ ëŒ€ê¸°**: í•˜ë“œì½”ë”©ëœ ëŒ€ê¸° ì‹œê°„ í”¼í•˜ê¸°
4. **í…ŒìŠ¤íŠ¸ ê²©ë¦¬**: ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ê³„
5. **ëª…í™•í•œ êµ¬ì¡°**: Setup-Action-Assertion íŒ¨í„´ ì¤€ìˆ˜
6. **ì—ëŸ¬ ì²˜ë¦¬**: ì‹¤íŒ¨ ì‹œ ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘
7. **ì„±ëŠ¥ ê³ ë ¤**: ë³‘ë ¬ ì‹¤í–‰ê³¼ ìµœì í™”ëœ ì„¤ì • ì‚¬ìš©
8. **Biome Lint ì¤€ìˆ˜**: E2E í…ŒìŠ¤íŠ¸ë„ í”„ë¡œë•ì…˜ ì½”ë“œì™€ ë™ì¼í•œ í’ˆì§ˆ ê¸°ì¤€ ì ìš©

## âš ï¸ ë¬¸ì„œ ì‘ì„± ê·œì¹™

### ì„ì‹œ ë¬¸ì„œëŠ” ë°˜ë“œì‹œ TEMP ì ‘ë‘ì–´ ì‚¬ìš©

**ì¤‘ìš”**: ì‚¬ìš©ìì—ê²Œ ì„¤ëª… ëª©ì ì´ê±°ë‚˜ ì¼íšŒì„± ì •ë³´ ì „ë‹¬ì„ ìœ„í•œ ì„ì‹œ ë¬¸ì„œë¥¼ ì‘ì„±í•  ë•ŒëŠ” **ë°˜ë“œì‹œ íŒŒì¼ëª…ì— `TEMP_`ë¥¼ ì ‘ë‘ì–´ë¡œ ë¶™ì—¬ì•¼** í•©ë‹ˆë‹¤.

#### ì„ì‹œ ë¬¸ì„œ ì‘ì„± ê·œì¹™
1. **íŒŒì¼ëª… í˜•ì‹**: `TEMP_ì‘ì—…ëª…_ë‚ ì§œ.md`
   - ì˜ˆ: `TEMP_playwright_setup_20250114.md`
   - ì˜ˆ: `TEMP_test_ê²°ê³¼_summary.md`

2. **ì‘ì„± ì‹œì **:
   - ì‚¬ìš©ìì—ê²Œ í•œ ë²ˆ ì„¤ëª…í•˜ê³  ëë‚  ë‚´ìš©
   - íŠ¹ì • ì‘ì—…ì˜ ì„ì‹œ ìš”ì•½/ë¦¬í¬íŠ¸
   - ì¼íšŒì„± ê°€ì´ë“œë‚˜ ë¶„ì„ ê²°ê³¼

3. **ì‘ì„±í•˜ì§€ ì•Šì•„ì•¼ í•  ê²½ìš°**:
   - ì§€ì†ì ìœ¼ë¡œ ì°¸ì¡°ë  ë¬¸ì„œ â†’ ê¸°ì¡´ ë¬¸ì„œì— í†µí•©
   - í”„ë¡œì íŠ¸ ê·œì¹™/ê°€ì´ë“œ â†’ `.cursor/rules/` ë˜ëŠ” `CLAUDE.md`ì— ì¶”ê°€
   - í…ŒìŠ¤íŠ¸ ì„¤ì •/êµ¬ì„± â†’ `e2e/README.md` ë˜ëŠ” ê´€ë ¨ ì„¤ì • íŒŒì¼ì— ì¶”ê°€

#### ì˜ˆì‹œ
```bash
# âœ… ì˜¬ë°”ë¥¸ ì„ì‹œ ë¬¸ì„œ ì‘ì„±
TEMP_headless_ì•ˆì •í™”_ì‘ì—…ìš”ì•½_20250114.md
TEMP_ë¡œê·¸ì¸_ì´ìŠˆ_ë¶„ì„.md
TEMP_í…ŒìŠ¤íŠ¸_ê²°ê³¼_ë¦¬í¬íŠ¸.md

# âŒ ì˜ëª»ëœ ë¬¸ì„œ ì‘ì„± (TEMP ì—†ì´ ìƒì„±)
PLAYWRIGHT_TDD_GUIDE.md  # â†’ ê¸°ì¡´ ë¬¸ì„œì— í†µí•©í•˜ê±°ë‚˜ TEMP_ ì ‘ë‘ì–´ ì‚¬ìš©
SUMMARY.md               # â†’ TEMP_SUMMARY.mdë¡œ ì‘ì„±
test-setup-guide.md      # â†’ e2e/README.mdì— í†µí•©
```

#### ì„ì‹œ ë¬¸ì„œ ê´€ë¦¬
- TEMPë¡œ ì‹œì‘í•˜ëŠ” íŒŒì¼ì€ ì‘ì—… ì™„ë£Œ í›„ ì‚¬ìš©ìì™€ í™•ì¸ í›„ ì‚­ì œ
- `.gitignore`ì— `TEMP_*.md` íŒ¨í„´ ì¶”ê°€ ê¶Œì¥
- í•„ìš”í•œ ë‚´ìš©ì€ ì •ì‹ ë¬¸ì„œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ì„ì‹œ íŒŒì¼ ì‚­ì œ
